<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>Hungry Monster</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand navlogo" href="#">Hungry Moster</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav ms-auto navmenu">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
              <a class="nav-link" href="#">About</a>
              <a class="nav-link" href="#">Recipies</a>
              <a class="nav-link" href="#" tabindex="-1" aria-disabled="true">Blog</a>
            </div>
          </div>
        </div>
      </nav>
    <div>
        <form class="col-md-6 m-auto py-5">
            <div class="input-group mb-3" id="submit-input">
                <input id="food-search" type="text" class="form-control" placeholder="">
                <div class="input-group-append">
                    <button id="food-submit" type="button" class="btn btn-danger">Search</button>
                </div>
            </div>
        </form>
    </div>
    <div id="show-details">
        <img src="" id="food-detailsimages" alt="">
        <h2 id="food-names"></h2>
        <ul id="show ingreants"></ul>
    </div>
    <div id="content" class="row row-cols-1 row-cols-md-4 g-5 m-5">

    </div>

    <script>
        document.getElementById('food-submit').addEventListener('click', function () {
            const inputValue = document.getElementById('food-search').value;
            fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${inputValue}`)
                .then(res => res.json())
                .then(data => {
                    if (data.meals === null){
                        alert("No items Found");
                        document.getElementById('food-search').value = "";
                    }
                    const allMeal = data.meals;
                    const allMeals = allMeal.strMeal;
                    removeElements(document.getElementById('content'));
                    for (let i = 0; i < allMeal.length; i++) {
                        const element = allMeal[i];
                        generateCard(element.strMeal, element.strMealThumb, element.idMeal);
                    }
                    document.getElementById('food-search').value = "";
                    document.getElementById('submit-input').style.display = 'none';
                })
        })
        const removeElements = (parent) => {
            while (parent.firstChild) {
                parent.removeChild(parent.firstChild);
            }
        }


        function generateCard(name, image, cardClick) {
            const foodContainer = document.getElementById("content");

            const cardColum = document.createElement('div');
            cardColum.className = "col";

            const card = document.createElement('div');
            card.className = "card";
            card.id = "meal";


            const img = document.createElement('img');
            img.className = "card-img-top";
            img.setAttribute('src', image);

            const cardBody = document.createElement('div');
            cardBody.className = "card-body";

            const cardTitle = document.createElement('h3');
            cardTitle.className = "card-title";
            cardTitle.id = "food-list";
            cardTitle.innerText = name;
            cardTitle.style.textAlign = 'center';

            foodContainer.appendChild(cardColum);
            cardColum.appendChild(card);
            card.appendChild(img);
            card.appendChild(cardBody);
            cardBody.appendChild(cardTitle);

            cardColum.addEventListener('click', function (event) {
                fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${cardClick}`)
                    .then(res => res.json())
                    .then(data => {
                        document.getElementById('food-names').innerText = data.meals[0].strMeal;
                        document.getElementById('food-detailsimages').setAttribute('src', data.meals[0].strMealThumb);
                        const integreant = document.getElementById('show ingreants');
                        integreant.innerHTML = `
                        <li>${data.meals[0].strIngredient1}</li>
                        <li>${data.meals[0].strIngredient2}</li>
                        <li>${data.meals[0].strIngredient3}</li>
                        <li>${data.meals[0].strIngredient4}</li>
                        <li>${data.meals[0].strIngredient5}</li>
                        <li>${data.meals[0].strIngredient6}</li>
                        <li>${data.meals[0].strIngredient7}</li>
                        <li>${data.meals[0].strIngredient8}</li>
                        <li>${data.meals[0].strIngredient9}</li>
                        <li>${data.meals[0].strIngredient10}</li>`
                    });
            })
        }


    </script>
</body>

</html>